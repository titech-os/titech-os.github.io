<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>bp</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.14' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/50.html#L33'>bp</a>                 33 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L35'>bp</a>                 35 kernel/fs.c      bp = bread(dev, 1);</span>
<span class='curline'><a href='../S/50.html#L36'>bp</a>                 36 kernel/fs.c      memmove(sb, bp-&gt;data, sizeof(*sb));</span>
<span class='curline'><a href='../S/50.html#L37'>bp</a>                 37 kernel/fs.c      brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L54'>bp</a>                 54 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L56'>bp</a>                 56 kernel/fs.c      bp = bread(dev, bno);</span>
<span class='curline'><a href='../S/50.html#L57'>bp</a>                 57 kernel/fs.c      memset(bp-&gt;data, 0, BSIZE);</span>
<span class='curline'><a href='../S/50.html#L58'>bp</a>                 58 kernel/fs.c      log_write(bp);</span>
<span class='curline'><a href='../S/50.html#L59'>bp</a>                 59 kernel/fs.c      brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L70'>bp</a>                 70 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L72'>bp</a>                 72 kernel/fs.c      bp = 0;</span>
<span class='curline'><a href='../S/50.html#L74'>bp</a>                 74 kernel/fs.c        bp = bread(dev, BBLOCK(b, sb));</span>
<span class='curline'><a href='../S/50.html#L77'>bp</a>                 77 kernel/fs.c          if((bp-&gt;data[bi/8] &amp; m) == 0){  // Is block free?</span>
<span class='curline'><a href='../S/50.html#L78'>bp</a>                 78 kernel/fs.c            bp-&gt;data[bi/8] |= m;  // Mark block in use.</span>
<span class='curline'><a href='../S/50.html#L79'>bp</a>                 79 kernel/fs.c            log_write(bp);</span>
<span class='curline'><a href='../S/50.html#L80'>bp</a>                 80 kernel/fs.c            brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L85'>bp</a>                 85 kernel/fs.c        brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L95'>bp</a>                 95 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L98'>bp</a>                 98 kernel/fs.c      bp = bread(dev, BBLOCK(b, sb));</span>
<span class='curline'><a href='../S/50.html#L101'>bp</a>                101 kernel/fs.c      if((bp-&gt;data[bi/8] &amp; m) == 0)</span>
<span class='curline'><a href='../S/50.html#L103'>bp</a>                103 kernel/fs.c      bp-&gt;data[bi/8] &amp;= ~m;</span>
<span class='curline'><a href='../S/50.html#L104'>bp</a>                104 kernel/fs.c      log_write(bp);</span>
<span class='curline'><a href='../S/50.html#L105'>bp</a>                105 kernel/fs.c      brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L203'>bp</a>                203 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L207'>bp</a>                207 kernel/fs.c        bp = bread(dev, IBLOCK(inum, sb));</span>
<span class='curline'><a href='../S/50.html#L208'>bp</a>                208 kernel/fs.c        dip = (struct dinode*)bp-&gt;data + inum%IPB;</span>
<span class='curline'><a href='../S/50.html#L212'>bp</a>                212 kernel/fs.c          log_write(bp);   // mark it allocated on the disk</span>
<span class='curline'><a href='../S/50.html#L213'>bp</a>                213 kernel/fs.c          brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L216'>bp</a>                216 kernel/fs.c        brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L229'>bp</a>                229 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L232'>bp</a>                232 kernel/fs.c      bp = bread(ip-&gt;dev, IBLOCK(ip-&gt;inum, sb));</span>
<span class='curline'><a href='../S/50.html#L233'>bp</a>                233 kernel/fs.c      dip = (struct dinode*)bp-&gt;data + ip-&gt;inum%IPB;</span>
<span class='curline'><a href='../S/50.html#L240'>bp</a>                240 kernel/fs.c      log_write(bp);</span>
<span class='curline'><a href='../S/50.html#L241'>bp</a>                241 kernel/fs.c      brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L296'>bp</a>                296 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L305'>bp</a>                305 kernel/fs.c        bp = bread(ip-&gt;dev, IBLOCK(ip-&gt;inum, sb));</span>
<span class='curline'><a href='../S/50.html#L306'>bp</a>                306 kernel/fs.c        dip = (struct dinode*)bp-&gt;data + ip-&gt;inum%IPB;</span>
<span class='curline'><a href='../S/50.html#L313'>bp</a>                313 kernel/fs.c        brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L378'>bp</a>                378 kernel/fs.c        struct buf *bp = bread(dev, IBLOCK(inum, sb));</span>
<span class='curline'><a href='../S/50.html#L379'>bp</a>                379 kernel/fs.c        struct dinode *dip = (struct dinode *)bp-&gt;data + inum % IPB;</span>
<span class='curline'><a href='../S/50.html#L384'>bp</a>                384 kernel/fs.c        brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L409'>bp</a>                409 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L430'>bp</a>                430 kernel/fs.c        bp = bread(ip-&gt;dev, addr);</span>
<span class='curline'><a href='../S/50.html#L431'>bp</a>                431 kernel/fs.c        a = (uint*)bp-&gt;data;</span>
<span class='curline'><a href='../S/50.html#L436'>bp</a>                436 kernel/fs.c            log_write(bp);</span>
<span class='curline'><a href='../S/50.html#L439'>bp</a>                439 kernel/fs.c        brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L452'>bp</a>                452 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L463'>bp</a>                463 kernel/fs.c        bp = bread(ip-&gt;dev, ip-&gt;addrs[NDIRECT]);</span>
<span class='curline'><a href='../S/50.html#L464'>bp</a>                464 kernel/fs.c        a = (uint*)bp-&gt;data;</span>
<span class='curline'><a href='../S/50.html#L469'>bp</a>                469 kernel/fs.c        brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L498'>bp</a>                498 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L509'>bp</a>                509 kernel/fs.c        bp = bread(ip-&gt;dev, addr);</span>
<span class='curline'><a href='../S/50.html#L511'>bp</a>                511 kernel/fs.c        if(either_copyout(user_dst, dst, bp-&gt;data + (off % BSIZE), m) == -1) {</span>
<span class='curline'><a href='../S/50.html#L512'>bp</a>                512 kernel/fs.c          brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L516'>bp</a>                516 kernel/fs.c        brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L532'>bp</a>                532 kernel/fs.c      struct buf *bp;</span>
<span class='curline'><a href='../S/50.html#L543'>bp</a>                543 kernel/fs.c        bp = bread(ip-&gt;dev, addr);</span>
<span class='curline'><a href='../S/50.html#L545'>bp</a>                545 kernel/fs.c        if(either_copyin(bp-&gt;data + (off % BSIZE), user_src, src, m) == -1) {</span>
<span class='curline'><a href='../S/50.html#L546'>bp</a>                546 kernel/fs.c          brelse(bp);</span>
<span class='curline'><a href='../S/50.html#L549'>bp</a>                549 kernel/fs.c        log_write(bp);</span>
<span class='curline'><a href='../S/50.html#L550'>bp</a>                550 kernel/fs.c        brelse(bp);</span>
<span class='curline'><a href='../S/12.html#L27'>bp</a>                 27 user/umalloc.c   Header *bp, *p;</span>
<span class='curline'><a href='../S/12.html#L29'>bp</a>                 29 user/umalloc.c   bp = (Header*)ap - 1;</span>
<span class='curline'><a href='../S/12.html#L30'>bp</a>                 30 user/umalloc.c   for(p = freep; !(bp &gt; p &amp;&amp; bp &lt; p-&gt;s.ptr); p = p-&gt;s.ptr)</span>
<span class='curline'><a href='../S/12.html#L31'>bp</a>                 31 user/umalloc.c     if(p &gt;= p-&gt;s.ptr &amp;&amp; (bp &gt; p || bp &lt; p-&gt;s.ptr))</span>
<span class='curline'><a href='../S/12.html#L33'>bp</a>                 33 user/umalloc.c   if(bp + bp-&gt;s.size == p-&gt;s.ptr){</span>
<span class='curline'><a href='../S/12.html#L34'>bp</a>                 34 user/umalloc.c     bp-&gt;s.size += p-&gt;s.ptr-&gt;s.size;</span>
<span class='curline'><a href='../S/12.html#L35'>bp</a>                 35 user/umalloc.c     bp-&gt;s.ptr = p-&gt;s.ptr-&gt;s.ptr;</span>
<span class='curline'><a href='../S/12.html#L37'>bp</a>                 37 user/umalloc.c     bp-&gt;s.ptr = p-&gt;s.ptr;</span>
<span class='curline'><a href='../S/12.html#L38'>bp</a>                 38 user/umalloc.c   if(p + p-&gt;s.size == bp){</span>
<span class='curline'><a href='../S/12.html#L39'>bp</a>                 39 user/umalloc.c     p-&gt;s.size += bp-&gt;s.size;</span>
<span class='curline'><a href='../S/12.html#L40'>bp</a>                 40 user/umalloc.c     p-&gt;s.ptr = bp-&gt;s.ptr;</span>
<span class='curline'><a href='../S/12.html#L42'>bp</a>                 42 user/umalloc.c     p-&gt;s.ptr = bp;</span>
</pre>
</body>
</html>
