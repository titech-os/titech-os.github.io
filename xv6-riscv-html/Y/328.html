<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>sb</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.14' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/50.html#L27'>sb</a>                 27 kernel/fs.c    struct superblock sb; </span>
<span class='curline'><a href='../S/50.html#L31'>sb</a>                 31 kernel/fs.c    readsb(int dev, struct superblock *sb)</span>
<span class='curline'><a href='../S/50.html#L36'>sb</a>                 36 kernel/fs.c      memmove(sb, bp-&gt;data, sizeof(*sb));</span>
<span class='curline'><a href='../S/50.html#L43'>sb</a>                 43 kernel/fs.c      readsb(dev, &amp;sb);</span>
<span class='curline'><a href='../S/50.html#L44'>sb</a>                 44 kernel/fs.c      if(sb.magic != FSMAGIC)</span>
<span class='curline'><a href='../S/50.html#L46'>sb</a>                 46 kernel/fs.c      initlog(dev, &amp;sb);</span>
<span class='curline'><a href='../S/50.html#L73'>sb</a>                 73 kernel/fs.c      for(b = 0; b &lt; sb.size; b += BPB){</span>
<span class='curline'><a href='../S/50.html#L74'>sb</a>                 74 kernel/fs.c        bp = bread(dev, BBLOCK(b, sb));</span>
<span class='curline'><a href='../S/50.html#L75'>sb</a>                 75 kernel/fs.c        for(bi = 0; bi &lt; BPB &amp;&amp; b + bi &lt; sb.size; bi++){</span>
<span class='curline'><a href='../S/50.html#L98'>sb</a>                 98 kernel/fs.c      bp = bread(dev, BBLOCK(b, sb));</span>
<span class='curline'><a href='../S/50.html#L206'>sb</a>                206 kernel/fs.c      for(inum = 1; inum &lt; sb.ninodes; inum++){</span>
<span class='curline'><a href='../S/50.html#L207'>sb</a>                207 kernel/fs.c        bp = bread(dev, IBLOCK(inum, sb));</span>
<span class='curline'><a href='../S/50.html#L232'>sb</a>                232 kernel/fs.c      bp = bread(ip-&gt;dev, IBLOCK(ip-&gt;inum, sb));</span>
<span class='curline'><a href='../S/50.html#L305'>sb</a>                305 kernel/fs.c        bp = bread(ip-&gt;dev, IBLOCK(ip-&gt;inum, sb));</span>
<span class='curline'><a href='../S/50.html#L376'>sb</a>                376 kernel/fs.c      for (int inum = 1; inum &lt; sb.ninodes; inum++) {</span>
<span class='curline'><a href='../S/50.html#L378'>sb</a>                378 kernel/fs.c        struct buf *bp = bread(dev, IBLOCK(inum, sb));</span>
<span class='curline'><a href='../S/74.html#L45'>sb</a>                 45 kernel/fs.h    #define IBLOCK(i, sb)     ((i) / IPB + sb.inodestart)</span>
<span class='curline'><a href='../S/74.html#L51'>sb</a>                 51 kernel/fs.h    #define BBLOCK(b, sb) ((b)/BPB + sb.bmapstart)</span>
<span class='curline'><a href='../S/32.html#L54'>sb</a>                 54 kernel/log.c   initlog(int dev, struct superblock *sb)</span>
<span class='curline'><a href='../S/32.html#L60'>sb</a>                 60 kernel/log.c     log.start = sb-&gt;logstart;</span>
<span class='curline'><a href='../S/3.html#L30'>sb</a>                 30 mkfs/mkfs.c    struct superblock sb;</span>
<span class='curline'><a href='../S/3.html#L96'>sb</a>                 96 mkfs/mkfs.c      sb.magic = FSMAGIC;</span>
<span class='curline'><a href='../S/3.html#L97'>sb</a>                 97 mkfs/mkfs.c      sb.size = xint(FSSIZE);</span>
<span class='curline'><a href='../S/3.html#L98'>sb</a>                 98 mkfs/mkfs.c      sb.nblocks = xint(nblocks);</span>
<span class='curline'><a href='../S/3.html#L99'>sb</a>                 99 mkfs/mkfs.c      sb.ninodes = xint(NINODES);</span>
<span class='curline'><a href='../S/3.html#L100'>sb</a>                100 mkfs/mkfs.c      sb.nlog = xint(nlog);</span>
<span class='curline'><a href='../S/3.html#L101'>sb</a>                101 mkfs/mkfs.c      sb.logstart = xint(2);</span>
<span class='curline'><a href='../S/3.html#L102'>sb</a>                102 mkfs/mkfs.c      sb.inodestart = xint(2+nlog);</span>
<span class='curline'><a href='../S/3.html#L103'>sb</a>                103 mkfs/mkfs.c      sb.bmapstart = xint(2+nlog+ninodeblocks);</span>
<span class='curline'><a href='../S/3.html#L114'>sb</a>                114 mkfs/mkfs.c      memmove(buf, &amp;sb, sizeof(sb));</span>
<span class='curline'><a href='../S/3.html#L193'>sb</a>                193 mkfs/mkfs.c      bn = IBLOCK(inum, sb);</span>
<span class='curline'><a href='../S/3.html#L207'>sb</a>                207 mkfs/mkfs.c      bn = IBLOCK(inum, sb);</span>
<span class='curline'><a href='../S/3.html#L248'>sb</a>                248 mkfs/mkfs.c      printf("balloc: write bitmap block at sector %d\n", sb.bmapstart);</span>
<span class='curline'><a href='../S/3.html#L249'>sb</a>                249 mkfs/mkfs.c      wsect(sb.bmapstart, buf);</span>
</pre>
</body>
</html>
