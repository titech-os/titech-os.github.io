<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>tf</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.6.2' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/15.html#L100'>tf</a>                100 exec.c           curproc-&gt;tf-&gt;eip = elf.entry;  // main</span>
<span class='curline'><a href='../S/15.html#L101'>tf</a>                101 exec.c           curproc-&gt;tf-&gt;esp = sp;</span>
<span class='curline'><a href='../S/75.html#L102'>tf</a>                102 proc.c           sp -= sizeof *p-&gt;tf;</span>
<span class='curline'><a href='../S/75.html#L103'>tf</a>                103 proc.c           p-&gt;tf = (struct trapframe*)sp;</span>
<span class='curline'><a href='../S/75.html#L133'>tf</a>                133 proc.c           memset(p-&gt;tf, 0, sizeof(*p-&gt;tf));</span>
<span class='curline'><a href='../S/75.html#L134'>tf</a>                134 proc.c           p-&gt;tf-&gt;cs = (SEG_UCODE &lt;&lt; 3) | DPL_USER;</span>
<span class='curline'><a href='../S/75.html#L135'>tf</a>                135 proc.c           p-&gt;tf-&gt;ds = (SEG_UDATA &lt;&lt; 3) | DPL_USER;</span>
<span class='curline'><a href='../S/75.html#L136'>tf</a>                136 proc.c           p-&gt;tf-&gt;es = p-&gt;tf-&gt;ds;</span>
<span class='curline'><a href='../S/75.html#L137'>tf</a>                137 proc.c           p-&gt;tf-&gt;ss = p-&gt;tf-&gt;ds;</span>
<span class='curline'><a href='../S/75.html#L138'>tf</a>                138 proc.c           p-&gt;tf-&gt;eflags = FL_IF;</span>
<span class='curline'><a href='../S/75.html#L139'>tf</a>                139 proc.c           p-&gt;tf-&gt;esp = PGSIZE;</span>
<span class='curline'><a href='../S/75.html#L140'>tf</a>                140 proc.c           p-&gt;tf-&gt;eip = 0;  // beginning of initcode.S</span>
<span class='curline'><a href='../S/75.html#L201'>tf</a>                201 proc.c           *np-&gt;tf = *curproc-&gt;tf;</span>
<span class='curline'><a href='../S/75.html#L204'>tf</a>                204 proc.c           np-&gt;tf-&gt;eax = 0;</span>
<span class='curline'><a href='../S/14.html#L45'>tf</a>                 45 proc.h           struct trapframe *tf;        // Trap frame for current syscall</span>
<span class='curline'><a href='../S/50.html#L52'>tf</a>                 52 syscall.c        return fetchint((myproc()-&gt;tf-&gt;esp) + 4 + 4*n, ip);</span>
<span class='curline'><a href='../S/50.html#L137'>tf</a>                137 syscall.c        num = curproc-&gt;tf-&gt;eax;</span>
<span class='curline'><a href='../S/50.html#L139'>tf</a>                139 syscall.c          curproc-&gt;tf-&gt;eax = syscalls[num]();</span>
<span class='curline'><a href='../S/50.html#L143'>tf</a>                143 syscall.c          curproc-&gt;tf-&gt;eax = -1;</span>
<span class='curline'><a href='../S/61.html#L37'>tf</a>                 37 trap.c         trap(struct trapframe *tf)</span>
<span class='curline'><a href='../S/61.html#L39'>tf</a>                 39 trap.c           if(tf-&gt;trapno == T_SYSCALL){</span>
<span class='curline'><a href='../S/61.html#L42'>tf</a>                 42 trap.c             myproc()-&gt;tf = tf;</span>
<span class='curline'><a href='../S/61.html#L49'>tf</a>                 49 trap.c           switch(tf-&gt;trapno){</span>
<span class='curline'><a href='../S/61.html#L77'>tf</a>                 77 trap.c                     cpuid(), tf-&gt;cs, tf-&gt;eip);</span>
<span class='curline'><a href='../S/61.html#L83'>tf</a>                 83 trap.c             if(myproc() == 0 || (tf-&gt;cs&amp;3) == 0){</span>
<span class='curline'><a href='../S/61.html#L86'>tf</a>                 86 trap.c                       tf-&gt;trapno, cpuid(), tf-&gt;eip, rcr2());</span>
<span class='curline'><a href='../S/61.html#L92'>tf</a>                 92 trap.c                     myproc()-&gt;pid, myproc()-&gt;name, tf-&gt;trapno,</span>
<span class='curline'><a href='../S/61.html#L93'>tf</a>                 93 trap.c                     tf-&gt;err, cpuid(), tf-&gt;eip, rcr2());</span>
<span class='curline'><a href='../S/61.html#L100'>tf</a>                100 trap.c           if(myproc() &amp;&amp; myproc()-&gt;killed &amp;&amp; (tf-&gt;cs&amp;3) == DPL_USER)</span>
<span class='curline'><a href='../S/61.html#L106'>tf</a>                106 trap.c              tf-&gt;trapno == T_IRQ0+IRQ_TIMER)</span>
<span class='curline'><a href='../S/61.html#L110'>tf</a>                110 trap.c           if(myproc() &amp;&amp; myproc()-&gt;killed &amp;&amp; (tf-&gt;cs&amp;3) == DPL_USER)</span>
</pre>
</body>
</html>
