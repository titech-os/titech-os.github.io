<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>ip</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.1' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/8.html#L228'>ip</a>                228 console.c      consoleread(struct inode *ip, char *dst, int n)</span>
<span class='curline'><a href='../S/8.html#L233'>ip</a>                233 console.c        iunlock(ip);</span>
<span class='curline'><a href='../S/8.html#L240'>ip</a>                240 console.c              ilock(ip);</span>
<span class='curline'><a href='../S/8.html#L260'>ip</a>                260 console.c        ilock(ip);</span>
<span class='curline'><a href='../S/8.html#L266'>ip</a>                266 console.c      consolewrite(struct inode *ip, char *buf, int n)</span>
<span class='curline'><a href='../S/8.html#L270'>ip</a>                270 console.c        iunlock(ip);</span>
<span class='curline'><a href='../S/8.html#L275'>ip</a>                275 console.c        ilock(ip);</span>
<span class='curline'><a href='../S/17.html#L17'>ip</a>                 17 exec.c           struct inode *ip;</span>
<span class='curline'><a href='../S/17.html#L22'>ip</a>                 22 exec.c           if((ip = namei(path)) == 0){</span>
<span class='curline'><a href='../S/17.html#L26'>ip</a>                 26 exec.c           ilock(ip);</span>
<span class='curline'><a href='../S/17.html#L30'>ip</a>                 30 exec.c           if(readi(ip, (char*)&amp;elf, 0, sizeof(elf)) &lt; sizeof(elf))</span>
<span class='curline'><a href='../S/17.html#L41'>ip</a>                 41 exec.c             if(readi(ip, (char*)&amp;ph, off, sizeof(ph)) != sizeof(ph))</span>
<span class='curline'><a href='../S/17.html#L49'>ip</a>                 49 exec.c             if(loaduvm(pgdir, (char*)ph.vaddr, ip, ph.off, ph.filesz) &lt; 0)</span>
<span class='curline'><a href='../S/17.html#L52'>ip</a>                 52 exec.c           iunlockput(ip);</span>
<span class='curline'><a href='../S/17.html#L54'>ip</a>                 54 exec.c           ip = 0;</span>
<span class='curline'><a href='../S/17.html#L102'>ip</a>                102 exec.c           if(ip){</span>
<span class='curline'><a href='../S/17.html#L103'>ip</a>                103 exec.c             iunlockput(ip);</span>
<span class='curline'><a href='../S/19.html#L76'>ip</a>                 76 file.c             iput(ff.ip);</span>
<span class='curline'><a href='../S/19.html#L86'>ip</a>                 86 file.c             ilock(f-&gt;ip);</span>
<span class='curline'><a href='../S/19.html#L87'>ip</a>                 87 file.c             stati(f-&gt;ip, st);</span>
<span class='curline'><a href='../S/19.html#L88'>ip</a>                 88 file.c             iunlock(f-&gt;ip);</span>
<span class='curline'><a href='../S/19.html#L105'>ip</a>                105 file.c             ilock(f-&gt;ip);</span>
<span class='curline'><a href='../S/19.html#L106'>ip</a>                106 file.c             if((r = readi(f-&gt;ip, addr, f-&gt;off, n)) &gt; 0)</span>
<span class='curline'><a href='../S/19.html#L108'>ip</a>                108 file.c             iunlock(f-&gt;ip);</span>
<span class='curline'><a href='../S/19.html#L140'>ip</a>                140 file.c               ilock(f-&gt;ip);</span>
<span class='curline'><a href='../S/19.html#L141'>ip</a>                141 file.c               if ((r = writei(f-&gt;ip, addr + i, f-&gt;off, n1)) &gt; 0)</span>
<span class='curline'><a href='../S/19.html#L143'>ip</a>                143 file.c               iunlock(f-&gt;ip);</span>
<span class='curline'><a href='../S/20.html#L7'>ip</a>                  7 file.h           struct inode *ip;</span>
<span class='curline'><a href='../S/22.html#L200'>ip</a>                200 fs.c           iupdate(struct inode *ip)</span>
<span class='curline'><a href='../S/22.html#L205'>ip</a>                205 fs.c             bp = bread(ip-&gt;dev, IBLOCK(ip-&gt;inum, sb));</span>
<span class='curline'><a href='../S/22.html#L206'>ip</a>                206 fs.c             dip = (struct dinode*)bp-&gt;data + ip-&gt;inum%IPB;</span>
<span class='curline'><a href='../S/22.html#L207'>ip</a>                207 fs.c             dip-&gt;type = ip-&gt;type;</span>
<span class='curline'><a href='../S/22.html#L208'>ip</a>                208 fs.c             dip-&gt;major = ip-&gt;major;</span>
<span class='curline'><a href='../S/22.html#L209'>ip</a>                209 fs.c             dip-&gt;minor = ip-&gt;minor;</span>
<span class='curline'><a href='../S/22.html#L210'>ip</a>                210 fs.c             dip-&gt;nlink = ip-&gt;nlink;</span>
<span class='curline'><a href='../S/22.html#L211'>ip</a>                211 fs.c             dip-&gt;size = ip-&gt;size;</span>
<span class='curline'><a href='../S/22.html#L212'>ip</a>                212 fs.c             memmove(dip-&gt;addrs, ip-&gt;addrs, sizeof(ip-&gt;addrs));</span>
<span class='curline'><a href='../S/22.html#L223'>ip</a>                223 fs.c             struct inode *ip, *empty;</span>
<span class='curline'><a href='../S/22.html#L229'>ip</a>                229 fs.c             for(ip = &amp;icache.inode[0]; ip &lt; &amp;icache.inode[NINODE]; ip++){</span>
<span class='curline'><a href='../S/22.html#L230'>ip</a>                230 fs.c               if(ip-&gt;ref &gt; 0 &amp;&amp; ip-&gt;dev == dev &amp;&amp; ip-&gt;inum == inum){</span>
<span class='curline'><a href='../S/22.html#L231'>ip</a>                231 fs.c                 ip-&gt;ref++;</span>
<span class='curline'><a href='../S/22.html#L233'>ip</a>                233 fs.c                 return ip;</span>
<span class='curline'><a href='../S/22.html#L235'>ip</a>                235 fs.c               if(empty == 0 &amp;&amp; ip-&gt;ref == 0)    // Remember empty slot.</span>
<span class='curline'><a href='../S/22.html#L236'>ip</a>                236 fs.c                 empty = ip;</span>
<span class='curline'><a href='../S/22.html#L243'>ip</a>                243 fs.c             ip = empty;</span>
<span class='curline'><a href='../S/22.html#L244'>ip</a>                244 fs.c             ip-&gt;dev = dev;</span>
<span class='curline'><a href='../S/22.html#L245'>ip</a>                245 fs.c             ip-&gt;inum = inum;</span>
<span class='curline'><a href='../S/22.html#L246'>ip</a>                246 fs.c             ip-&gt;ref = 1;</span>
<span class='curline'><a href='../S/22.html#L247'>ip</a>                247 fs.c             ip-&gt;flags = 0;</span>
<span class='curline'><a href='../S/22.html#L250'>ip</a>                250 fs.c             return ip;</span>
<span class='curline'><a href='../S/22.html#L256'>ip</a>                256 fs.c           idup(struct inode *ip)</span>
<span class='curline'><a href='../S/22.html#L259'>ip</a>                259 fs.c             ip-&gt;ref++;</span>
<span class='curline'><a href='../S/22.html#L261'>ip</a>                261 fs.c             return ip;</span>
<span class='curline'><a href='../S/22.html#L267'>ip</a>                267 fs.c           ilock(struct inode *ip)</span>
<span class='curline'><a href='../S/22.html#L272'>ip</a>                272 fs.c             if(ip == 0 || ip-&gt;ref &lt; 1)</span>
<span class='curline'><a href='../S/22.html#L276'>ip</a>                276 fs.c             while(ip-&gt;flags &amp; I_BUSY)</span>
<span class='curline'><a href='../S/22.html#L277'>ip</a>                277 fs.c               sleep(ip, &amp;icache.lock);</span>
<span class='curline'><a href='../S/22.html#L278'>ip</a>                278 fs.c             ip-&gt;flags |= I_BUSY;</span>
<span class='curline'><a href='../S/22.html#L281'>ip</a>                281 fs.c             if(!(ip-&gt;flags &amp; I_VALID)){</span>
<span class='curline'><a href='../S/22.html#L282'>ip</a>                282 fs.c               bp = bread(ip-&gt;dev, IBLOCK(ip-&gt;inum, sb));</span>
<span class='curline'><a href='../S/22.html#L283'>ip</a>                283 fs.c               dip = (struct dinode*)bp-&gt;data + ip-&gt;inum%IPB;</span>
<span class='curline'><a href='../S/22.html#L284'>ip</a>                284 fs.c               ip-&gt;type = dip-&gt;type;</span>
<span class='curline'><a href='../S/22.html#L285'>ip</a>                285 fs.c               ip-&gt;major = dip-&gt;major;</span>
<span class='curline'><a href='../S/22.html#L286'>ip</a>                286 fs.c               ip-&gt;minor = dip-&gt;minor;</span>
<span class='curline'><a href='../S/22.html#L287'>ip</a>                287 fs.c               ip-&gt;nlink = dip-&gt;nlink;</span>
<span class='curline'><a href='../S/22.html#L288'>ip</a>                288 fs.c               ip-&gt;size = dip-&gt;size;</span>
<span class='curline'><a href='../S/22.html#L289'>ip</a>                289 fs.c               memmove(ip-&gt;addrs, dip-&gt;addrs, sizeof(ip-&gt;addrs));</span>
<span class='curline'><a href='../S/22.html#L291'>ip</a>                291 fs.c               ip-&gt;flags |= I_VALID;</span>
<span class='curline'><a href='../S/22.html#L292'>ip</a>                292 fs.c               if(ip-&gt;type == 0)</span>
<span class='curline'><a href='../S/22.html#L299'>ip</a>                299 fs.c           iunlock(struct inode *ip)</span>
<span class='curline'><a href='../S/22.html#L301'>ip</a>                301 fs.c             if(ip == 0 || !(ip-&gt;flags &amp; I_BUSY) || ip-&gt;ref &lt; 1)</span>
<span class='curline'><a href='../S/22.html#L305'>ip</a>                305 fs.c             ip-&gt;flags &amp;= ~I_BUSY;</span>
<span class='curline'><a href='../S/22.html#L306'>ip</a>                306 fs.c             wakeup(ip);</span>
<span class='curline'><a href='../S/22.html#L318'>ip</a>                318 fs.c           iput(struct inode *ip)</span>
<span class='curline'><a href='../S/22.html#L321'>ip</a>                321 fs.c             if(ip-&gt;ref == 1 &amp;&amp; (ip-&gt;flags &amp; I_VALID) &amp;&amp; ip-&gt;nlink == 0){</span>
<span class='curline'><a href='../S/22.html#L323'>ip</a>                323 fs.c               if(ip-&gt;flags &amp; I_BUSY)</span>
<span class='curline'><a href='../S/22.html#L325'>ip</a>                325 fs.c               ip-&gt;flags |= I_BUSY;</span>
<span class='curline'><a href='../S/22.html#L327'>ip</a>                327 fs.c               itrunc(ip);</span>
<span class='curline'><a href='../S/22.html#L328'>ip</a>                328 fs.c               ip-&gt;type = 0;</span>
<span class='curline'><a href='../S/22.html#L329'>ip</a>                329 fs.c               iupdate(ip);</span>
<span class='curline'><a href='../S/22.html#L331'>ip</a>                331 fs.c               ip-&gt;flags = 0;</span>
<span class='curline'><a href='../S/22.html#L332'>ip</a>                332 fs.c               wakeup(ip);</span>
<span class='curline'><a href='../S/22.html#L334'>ip</a>                334 fs.c             ip-&gt;ref--;</span>
<span class='curline'><a href='../S/22.html#L340'>ip</a>                340 fs.c           iunlockput(struct inode *ip)</span>
<span class='curline'><a href='../S/22.html#L342'>ip</a>                342 fs.c             iunlock(ip);</span>
<span class='curline'><a href='../S/22.html#L343'>ip</a>                343 fs.c             iput(ip);</span>
<span class='curline'><a href='../S/22.html#L357'>ip</a>                357 fs.c           bmap(struct inode *ip, uint bn)</span>
<span class='curline'><a href='../S/22.html#L363'>ip</a>                363 fs.c               if((addr = ip-&gt;addrs[bn]) == 0)</span>
<span class='curline'><a href='../S/22.html#L364'>ip</a>                364 fs.c                 ip-&gt;addrs[bn] = addr = balloc(ip-&gt;dev);</span>
<span class='curline'><a href='../S/22.html#L371'>ip</a>                371 fs.c               if((addr = ip-&gt;addrs[NDIRECT]) == 0)</span>
<span class='curline'><a href='../S/22.html#L372'>ip</a>                372 fs.c                 ip-&gt;addrs[NDIRECT] = addr = balloc(ip-&gt;dev);</span>
<span class='curline'><a href='../S/22.html#L373'>ip</a>                373 fs.c               bp = bread(ip-&gt;dev, addr);</span>
<span class='curline'><a href='../S/22.html#L376'>ip</a>                376 fs.c                 a[bn] = addr = balloc(ip-&gt;dev);</span>
<span class='curline'><a href='../S/22.html#L392'>ip</a>                392 fs.c           itrunc(struct inode *ip)</span>
<span class='curline'><a href='../S/22.html#L399'>ip</a>                399 fs.c               if(ip-&gt;addrs[i]){</span>
<span class='curline'><a href='../S/22.html#L400'>ip</a>                400 fs.c                 bfree(ip-&gt;dev, ip-&gt;addrs[i]);</span>
<span class='curline'><a href='../S/22.html#L401'>ip</a>                401 fs.c                 ip-&gt;addrs[i] = 0;</span>
<span class='curline'><a href='../S/22.html#L405'>ip</a>                405 fs.c             if(ip-&gt;addrs[NDIRECT]){</span>
<span class='curline'><a href='../S/22.html#L406'>ip</a>                406 fs.c               bp = bread(ip-&gt;dev, ip-&gt;addrs[NDIRECT]);</span>
<span class='curline'><a href='../S/22.html#L410'>ip</a>                410 fs.c                   bfree(ip-&gt;dev, a[j]);</span>
<span class='curline'><a href='../S/22.html#L413'>ip</a>                413 fs.c               bfree(ip-&gt;dev, ip-&gt;addrs[NDIRECT]);</span>
<span class='curline'><a href='../S/22.html#L414'>ip</a>                414 fs.c               ip-&gt;addrs[NDIRECT] = 0;</span>
<span class='curline'><a href='../S/22.html#L417'>ip</a>                417 fs.c             ip-&gt;size = 0;</span>
<span class='curline'><a href='../S/22.html#L418'>ip</a>                418 fs.c             iupdate(ip);</span>
<span class='curline'><a href='../S/22.html#L423'>ip</a>                423 fs.c           stati(struct inode *ip, struct stat *st)</span>
<span class='curline'><a href='../S/22.html#L425'>ip</a>                425 fs.c             st-&gt;dev = ip-&gt;dev;</span>
<span class='curline'><a href='../S/22.html#L426'>ip</a>                426 fs.c             st-&gt;ino = ip-&gt;inum;</span>
<span class='curline'><a href='../S/22.html#L427'>ip</a>                427 fs.c             st-&gt;type = ip-&gt;type;</span>
<span class='curline'><a href='../S/22.html#L428'>ip</a>                428 fs.c             st-&gt;nlink = ip-&gt;nlink;</span>
<span class='curline'><a href='../S/22.html#L429'>ip</a>                429 fs.c             st-&gt;size = ip-&gt;size;</span>
<span class='curline'><a href='../S/22.html#L435'>ip</a>                435 fs.c           readi(struct inode *ip, char *dst, uint off, uint n)</span>
<span class='curline'><a href='../S/22.html#L440'>ip</a>                440 fs.c             if(ip-&gt;type == T_DEV){</span>
<span class='curline'><a href='../S/22.html#L441'>ip</a>                441 fs.c               if(ip-&gt;major &lt; 0 || ip-&gt;major &gt;= NDEV || !devsw[ip-&gt;major].read)</span>
<span class='curline'><a href='../S/22.html#L443'>ip</a>                443 fs.c               return devsw[ip-&gt;major].read(ip, dst, n);</span>
<span class='curline'><a href='../S/22.html#L446'>ip</a>                446 fs.c             if(off &gt; ip-&gt;size || off + n &lt; off)</span>
<span class='curline'><a href='../S/22.html#L448'>ip</a>                448 fs.c             if(off + n &gt; ip-&gt;size)</span>
<span class='curline'><a href='../S/22.html#L449'>ip</a>                449 fs.c               n = ip-&gt;size - off;</span>
<span class='curline'><a href='../S/22.html#L452'>ip</a>                452 fs.c               bp = bread(ip-&gt;dev, bmap(ip, off/BSIZE));</span>
<span class='curline'><a href='../S/22.html#L463'>ip</a>                463 fs.c           writei(struct inode *ip, char *src, uint off, uint n)</span>
<span class='curline'><a href='../S/22.html#L468'>ip</a>                468 fs.c             if(ip-&gt;type == T_DEV){</span>
<span class='curline'><a href='../S/22.html#L469'>ip</a>                469 fs.c               if(ip-&gt;major &lt; 0 || ip-&gt;major &gt;= NDEV || !devsw[ip-&gt;major].write)</span>
<span class='curline'><a href='../S/22.html#L471'>ip</a>                471 fs.c               return devsw[ip-&gt;major].write(ip, src, n);</span>
<span class='curline'><a href='../S/22.html#L474'>ip</a>                474 fs.c             if(off &gt; ip-&gt;size || off + n &lt; off)</span>
<span class='curline'><a href='../S/22.html#L480'>ip</a>                480 fs.c               bp = bread(ip-&gt;dev, bmap(ip, off/BSIZE));</span>
<span class='curline'><a href='../S/22.html#L487'>ip</a>                487 fs.c             if(n &gt; 0 &amp;&amp; off &gt; ip-&gt;size){</span>
<span class='curline'><a href='../S/22.html#L488'>ip</a>                488 fs.c               ip-&gt;size = off;</span>
<span class='curline'><a href='../S/22.html#L489'>ip</a>                489 fs.c               iupdate(ip);</span>
<span class='curline'><a href='../S/22.html#L537'>ip</a>                537 fs.c             struct inode *ip;</span>
<span class='curline'><a href='../S/22.html#L540'>ip</a>                540 fs.c             if((ip = dirlookup(dp, name, 0)) != 0){</span>
<span class='curline'><a href='../S/22.html#L541'>ip</a>                541 fs.c               iput(ip);</span>
<span class='curline'><a href='../S/22.html#L608'>ip</a>                608 fs.c             struct inode *ip, *next;</span>
<span class='curline'><a href='../S/22.html#L611'>ip</a>                611 fs.c               ip = iget(ROOTDEV, ROOTINO);</span>
<span class='curline'><a href='../S/22.html#L613'>ip</a>                613 fs.c               ip = idup(proc-&gt;cwd);</span>
<span class='curline'><a href='../S/22.html#L616'>ip</a>                616 fs.c               ilock(ip);</span>
<span class='curline'><a href='../S/22.html#L617'>ip</a>                617 fs.c               if(ip-&gt;type != T_DIR){</span>
<span class='curline'><a href='../S/22.html#L618'>ip</a>                618 fs.c                 iunlockput(ip);</span>
<span class='curline'><a href='../S/22.html#L623'>ip</a>                623 fs.c                 iunlock(ip);</span>
<span class='curline'><a href='../S/22.html#L624'>ip</a>                624 fs.c                 return ip;</span>
<span class='curline'><a href='../S/22.html#L626'>ip</a>                626 fs.c               if((next = dirlookup(ip, name, 0)) == 0){</span>
<span class='curline'><a href='../S/22.html#L627'>ip</a>                627 fs.c                 iunlockput(ip);</span>
<span class='curline'><a href='../S/22.html#L630'>ip</a>                630 fs.c               iunlockput(ip);</span>
<span class='curline'><a href='../S/22.html#L631'>ip</a>                631 fs.c               ip = next;</span>
<span class='curline'><a href='../S/22.html#L634'>ip</a>                634 fs.c               iput(ip);</span>
<span class='curline'><a href='../S/22.html#L637'>ip</a>                637 fs.c             return ip;</span>
<span class='curline'><a href='../S/45.html#L39'>ip</a>                 39 mkfs.c         void rinode(uint inum, struct dinode *ip);</span>
<span class='curline'><a href='../S/45.html#L184'>ip</a>                184 mkfs.c         winode(uint inum, struct dinode *ip)</span>
<span class='curline'><a href='../S/45.html#L193'>ip</a>                193 mkfs.c           *dip = *ip;</span>
<span class='curline'><a href='../S/45.html#L198'>ip</a>                198 mkfs.c         rinode(uint inum, struct dinode *ip)</span>
<span class='curline'><a href='../S/45.html#L207'>ip</a>                207 mkfs.c           *ip = *dip;</span>
<span class='curline'><a href='../S/76.html#L18'>ip</a>                 18 syscall.c      fetchint(uint addr, int *ip)</span>
<span class='curline'><a href='../S/76.html#L22'>ip</a>                 22 syscall.c        *ip = *(int*)(addr);</span>
<span class='curline'><a href='../S/76.html#L46'>ip</a>                 46 syscall.c      argint(int n, int *ip)</span>
<span class='curline'><a href='../S/76.html#L48'>ip</a>                 48 syscall.c        return fetchint(proc-&gt;tf-&gt;esp + 4 + 4*n, ip);</span>
<span class='curline'><a href='../S/78.html#L119'>ip</a>                119 sysfile.c        struct inode *dp, *ip;</span>
<span class='curline'><a href='../S/78.html#L125'>ip</a>                125 sysfile.c        if((ip = namei(old)) == 0){</span>
<span class='curline'><a href='../S/78.html#L130'>ip</a>                130 sysfile.c        ilock(ip);</span>
<span class='curline'><a href='../S/78.html#L131'>ip</a>                131 sysfile.c        if(ip-&gt;type == T_DIR){</span>
<span class='curline'><a href='../S/78.html#L132'>ip</a>                132 sysfile.c          iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L137'>ip</a>                137 sysfile.c        ip-&gt;nlink++;</span>
<span class='curline'><a href='../S/78.html#L138'>ip</a>                138 sysfile.c        iupdate(ip);</span>
<span class='curline'><a href='../S/78.html#L139'>ip</a>                139 sysfile.c        iunlock(ip);</span>
<span class='curline'><a href='../S/78.html#L144'>ip</a>                144 sysfile.c        if(dp-&gt;dev != ip-&gt;dev || dirlink(dp, name, ip-&gt;inum) &lt; 0){</span>
<span class='curline'><a href='../S/78.html#L149'>ip</a>                149 sysfile.c        iput(ip);</span>
<span class='curline'><a href='../S/78.html#L156'>ip</a>                156 sysfile.c        ilock(ip);</span>
<span class='curline'><a href='../S/78.html#L157'>ip</a>                157 sysfile.c        ip-&gt;nlink--;</span>
<span class='curline'><a href='../S/78.html#L158'>ip</a>                158 sysfile.c        iupdate(ip);</span>
<span class='curline'><a href='../S/78.html#L159'>ip</a>                159 sysfile.c        iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L184'>ip</a>                184 sysfile.c        struct inode *ip, *dp;</span>
<span class='curline'><a href='../S/78.html#L204'>ip</a>                204 sysfile.c        if((ip = dirlookup(dp, name, &amp;off)) == 0)</span>
<span class='curline'><a href='../S/78.html#L206'>ip</a>                206 sysfile.c        ilock(ip);</span>
<span class='curline'><a href='../S/78.html#L208'>ip</a>                208 sysfile.c        if(ip-&gt;nlink &lt; 1)</span>
<span class='curline'><a href='../S/78.html#L210'>ip</a>                210 sysfile.c        if(ip-&gt;type == T_DIR &amp;&amp; !isdirempty(ip)){</span>
<span class='curline'><a href='../S/78.html#L211'>ip</a>                211 sysfile.c          iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L218'>ip</a>                218 sysfile.c        if(ip-&gt;type == T_DIR){</span>
<span class='curline'><a href='../S/78.html#L224'>ip</a>                224 sysfile.c        ip-&gt;nlink--;</span>
<span class='curline'><a href='../S/78.html#L225'>ip</a>                225 sysfile.c        iupdate(ip);</span>
<span class='curline'><a href='../S/78.html#L226'>ip</a>                226 sysfile.c        iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L242'>ip</a>                242 sysfile.c        struct inode *ip, *dp;</span>
<span class='curline'><a href='../S/78.html#L249'>ip</a>                249 sysfile.c        if((ip = dirlookup(dp, name, &amp;off)) != 0){</span>
<span class='curline'><a href='../S/78.html#L251'>ip</a>                251 sysfile.c          ilock(ip);</span>
<span class='curline'><a href='../S/78.html#L252'>ip</a>                252 sysfile.c          if(type == T_FILE &amp;&amp; ip-&gt;type == T_FILE)</span>
<span class='curline'><a href='../S/78.html#L253'>ip</a>                253 sysfile.c            return ip;</span>
<span class='curline'><a href='../S/78.html#L254'>ip</a>                254 sysfile.c          iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L258'>ip</a>                258 sysfile.c        if((ip = ialloc(dp-&gt;dev, type)) == 0)</span>
<span class='curline'><a href='../S/78.html#L261'>ip</a>                261 sysfile.c        ilock(ip);</span>
<span class='curline'><a href='../S/78.html#L262'>ip</a>                262 sysfile.c        ip-&gt;major = major;</span>
<span class='curline'><a href='../S/78.html#L263'>ip</a>                263 sysfile.c        ip-&gt;minor = minor;</span>
<span class='curline'><a href='../S/78.html#L264'>ip</a>                264 sysfile.c        ip-&gt;nlink = 1;</span>
<span class='curline'><a href='../S/78.html#L265'>ip</a>                265 sysfile.c        iupdate(ip);</span>
<span class='curline'><a href='../S/78.html#L271'>ip</a>                271 sysfile.c          if(dirlink(ip, ".", ip-&gt;inum) &lt; 0 || dirlink(ip, "..", dp-&gt;inum) &lt; 0)</span>
<span class='curline'><a href='../S/78.html#L275'>ip</a>                275 sysfile.c        if(dirlink(dp, name, ip-&gt;inum) &lt; 0)</span>
<span class='curline'><a href='../S/78.html#L280'>ip</a>                280 sysfile.c        return ip;</span>
<span class='curline'><a href='../S/78.html#L289'>ip</a>                289 sysfile.c        struct inode *ip;</span>
<span class='curline'><a href='../S/78.html#L297'>ip</a>                297 sysfile.c          ip = create(path, T_FILE, 0, 0);</span>
<span class='curline'><a href='../S/78.html#L298'>ip</a>                298 sysfile.c          if(ip == 0){</span>
<span class='curline'><a href='../S/78.html#L303'>ip</a>                303 sysfile.c          if((ip = namei(path)) == 0){</span>
<span class='curline'><a href='../S/78.html#L307'>ip</a>                307 sysfile.c          ilock(ip);</span>
<span class='curline'><a href='../S/78.html#L308'>ip</a>                308 sysfile.c          if(ip-&gt;type == T_DIR &amp;&amp; omode != O_RDONLY){</span>
<span class='curline'><a href='../S/78.html#L309'>ip</a>                309 sysfile.c            iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L318'>ip</a>                318 sysfile.c          iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L322'>ip</a>                322 sysfile.c        iunlock(ip);</span>
<span class='curline'><a href='../S/78.html#L326'>ip</a>                326 sysfile.c        f-&gt;ip = ip;</span>
<span class='curline'><a href='../S/78.html#L337'>ip</a>                337 sysfile.c        struct inode *ip;</span>
<span class='curline'><a href='../S/78.html#L340'>ip</a>                340 sysfile.c        if(argstr(0, &amp;path) &lt; 0 || (ip = create(path, T_DIR, 0, 0)) == 0){</span>
<span class='curline'><a href='../S/78.html#L344'>ip</a>                344 sysfile.c        iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L352'>ip</a>                352 sysfile.c        struct inode *ip;</span>
<span class='curline'><a href='../S/78.html#L361'>ip</a>                361 sysfile.c           (ip = create(path, T_DEV, major, minor)) == 0){</span>
<span class='curline'><a href='../S/78.html#L365'>ip</a>                365 sysfile.c        iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L374'>ip</a>                374 sysfile.c        struct inode *ip;</span>
<span class='curline'><a href='../S/78.html#L377'>ip</a>                377 sysfile.c        if(argstr(0, &amp;path) &lt; 0 || (ip = namei(path)) == 0){</span>
<span class='curline'><a href='../S/78.html#L381'>ip</a>                381 sysfile.c        ilock(ip);</span>
<span class='curline'><a href='../S/78.html#L382'>ip</a>                382 sysfile.c        if(ip-&gt;type != T_DIR){</span>
<span class='curline'><a href='../S/78.html#L383'>ip</a>                383 sysfile.c          iunlockput(ip);</span>
<span class='curline'><a href='../S/78.html#L387'>ip</a>                387 sysfile.c        iunlock(ip);</span>
<span class='curline'><a href='../S/78.html#L390'>ip</a>                390 sysfile.c        proc-&gt;cwd = ip;</span>
<span class='curline'><a href='../S/95.html#L197'>ip</a>                197 vm.c           loaduvm(pde_t *pgdir, char *addr, struct inode *ip, uint offset, uint sz)</span>
<span class='curline'><a href='../S/95.html#L212'>ip</a>                212 vm.c               if(readi(ip, p2v(pa), offset+i, n) != n)</span>
</pre>
</body>
</html>
