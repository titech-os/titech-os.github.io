<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>sb</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.1' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/11.html#L37'>sb</a>                 37 defs.h         void            readsb(int dev, struct superblock *sb);</span>
<span class='curline'><a href='../S/22.html#L25'>sb</a>                 25 fs.c           struct superblock sb;   // there should be one per dev, but we run with one dev</span>
<span class='curline'><a href='../S/22.html#L29'>sb</a>                 29 fs.c           readsb(int dev, struct superblock *sb)</span>
<span class='curline'><a href='../S/22.html#L34'>sb</a>                 34 fs.c             memmove(sb, bp-&gt;data, sizeof(*sb));</span>
<span class='curline'><a href='../S/22.html#L60'>sb</a>                 60 fs.c             for(b = 0; b &lt; sb.size; b += BPB){</span>
<span class='curline'><a href='../S/22.html#L61'>sb</a>                 61 fs.c               bp = bread(dev, BBLOCK(b, sb));</span>
<span class='curline'><a href='../S/22.html#L62'>sb</a>                 62 fs.c               for(bi = 0; bi &lt; BPB &amp;&amp; b + bi &lt; sb.size; bi++){</span>
<span class='curline'><a href='../S/22.html#L84'>sb</a>                 84 fs.c             readsb(dev, &amp;sb);</span>
<span class='curline'><a href='../S/22.html#L85'>sb</a>                 85 fs.c             bp = bread(dev, BBLOCK(b, sb));</span>
<span class='curline'><a href='../S/22.html#L166'>sb</a>                166 fs.c             readsb(dev, &amp;sb);</span>
<span class='curline'><a href='../S/22.html#L167'>sb</a>                167 fs.c             cprintf("sb: size %d nblocks %d ninodes %d nlog %d logstart %d inodestart %d bmap start %d\n", sb.size,</span>
<span class='curline'><a href='../S/22.html#L168'>sb</a>                168 fs.c                     sb.nblocks, sb.ninodes, sb.nlog, sb.logstart, sb.inodestart, sb.bmapstart);</span>
<span class='curline'><a href='../S/22.html#L183'>sb</a>                183 fs.c             for(inum = 1; inum &lt; sb.ninodes; inum++){</span>
<span class='curline'><a href='../S/22.html#L184'>sb</a>                184 fs.c               bp = bread(dev, IBLOCK(inum, sb));</span>
<span class='curline'><a href='../S/22.html#L205'>sb</a>                205 fs.c             bp = bread(ip-&gt;dev, IBLOCK(ip-&gt;inum, sb));</span>
<span class='curline'><a href='../S/22.html#L282'>sb</a>                282 fs.c               bp = bread(ip-&gt;dev, IBLOCK(ip-&gt;inum, sb));</span>
<span class='curline'><a href='../S/23.html#L41'>sb</a>                 41 fs.h           #define IBLOCK(i, sb)     ((i) / IPB + sb.inodestart)</span>
<span class='curline'><a href='../S/23.html#L47'>sb</a>                 47 fs.h           #define BBLOCK(b, sb) (b/BPB + sb.bmapstart)</span>
<span class='curline'><a href='../S/35.html#L207'>sb</a>                207 lapic.c          int sb, bcd;</span>
<span class='curline'><a href='../S/35.html#L209'>sb</a>                209 lapic.c          sb = cmos_read(CMOS_STATB);</span>
<span class='curline'><a href='../S/35.html#L211'>sb</a>                211 lapic.c          bcd = (sb &amp; (1 &lt;&lt; 2)) == 0;</span>
<span class='curline'><a href='../S/38.html#L58'>sb</a>                 58 log.c            struct superblock sb;</span>
<span class='curline'><a href='../S/38.html#L60'>sb</a>                 60 log.c            readsb(dev, &amp;sb);</span>
<span class='curline'><a href='../S/38.html#L61'>sb</a>                 61 log.c            log.start = sb.logstart;</span>
<span class='curline'><a href='../S/38.html#L62'>sb</a>                 62 log.c            log.size = sb.nlog;</span>
<span class='curline'><a href='../S/45.html#L30'>sb</a>                 30 mkfs.c         struct superblock sb;</span>
<span class='curline'><a href='../S/45.html#L97'>sb</a>                 97 mkfs.c           sb.size = xint(FSSIZE);</span>
<span class='curline'><a href='../S/45.html#L98'>sb</a>                 98 mkfs.c           sb.nblocks = xint(nblocks);</span>
<span class='curline'><a href='../S/45.html#L99'>sb</a>                 99 mkfs.c           sb.ninodes = xint(NINODES);</span>
<span class='curline'><a href='../S/45.html#L100'>sb</a>                100 mkfs.c           sb.nlog = xint(nlog);</span>
<span class='curline'><a href='../S/45.html#L101'>sb</a>                101 mkfs.c           sb.logstart = xint(2);</span>
<span class='curline'><a href='../S/45.html#L102'>sb</a>                102 mkfs.c           sb.inodestart = xint(2+nlog);</span>
<span class='curline'><a href='../S/45.html#L103'>sb</a>                103 mkfs.c           sb.bmapstart = xint(2+nlog+ninodeblocks);</span>
<span class='curline'><a href='../S/45.html#L114'>sb</a>                114 mkfs.c           memmove(buf, &amp;sb, sizeof(sb));</span>
<span class='curline'><a href='../S/45.html#L190'>sb</a>                190 mkfs.c           bn = IBLOCK(inum, sb);</span>
<span class='curline'><a href='../S/45.html#L204'>sb</a>                204 mkfs.c           bn = IBLOCK(inum, sb);</span>
<span class='curline'><a href='../S/45.html#L249'>sb</a>                249 mkfs.c           printf("balloc: write bitmap block at sector %d\n", sb.bmapstart);</span>
<span class='curline'><a href='../S/45.html#L250'>sb</a>                250 mkfs.c           wsect(sb.bmapstart, buf);</span>
</pre>
</body>
</html>
