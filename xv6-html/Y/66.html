<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>curproc</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.7' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/30.html#L20'>curproc</a>            20 exec.c           struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/30.html#L94'>curproc</a>            94 exec.c           safestrcpy(curproc-&gt;name, last, sizeof(curproc-&gt;name));</span>
<span class='curline'><a href='../S/30.html#L97'>curproc</a>            97 exec.c           oldpgdir = curproc-&gt;pgdir;</span>
<span class='curline'><a href='../S/30.html#L98'>curproc</a>            98 exec.c           curproc-&gt;pgdir = pgdir;</span>
<span class='curline'><a href='../S/30.html#L99'>curproc</a>            99 exec.c           curproc-&gt;sz = sz;</span>
<span class='curline'><a href='../S/30.html#L100'>curproc</a>           100 exec.c           curproc-&gt;tf-&gt;eip = elf.entry;  // main</span>
<span class='curline'><a href='../S/30.html#L101'>curproc</a>           101 exec.c           curproc-&gt;tf-&gt;esp = sp;</span>
<span class='curline'><a href='../S/30.html#L102'>curproc</a>           102 exec.c           switchuvm(curproc);</span>
<span class='curline'><a href='../S/107.html#L162'>curproc</a>           162 proc.c           struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/107.html#L164'>curproc</a>           164 proc.c           sz = curproc-&gt;sz;</span>
<span class='curline'><a href='../S/107.html#L166'>curproc</a>           166 proc.c             if((sz = allocuvm(curproc-&gt;pgdir, sz, sz + n)) == 0)</span>
<span class='curline'><a href='../S/107.html#L169'>curproc</a>           169 proc.c             if((sz = deallocuvm(curproc-&gt;pgdir, sz, sz + n)) == 0)</span>
<span class='curline'><a href='../S/107.html#L172'>curproc</a>           172 proc.c           curproc-&gt;sz = sz;</span>
<span class='curline'><a href='../S/107.html#L173'>curproc</a>           173 proc.c           switchuvm(curproc);</span>
<span class='curline'><a href='../S/107.html#L185'>curproc</a>           185 proc.c           struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/107.html#L193'>curproc</a>           193 proc.c           if((np-&gt;pgdir = copyuvm(curproc-&gt;pgdir, curproc-&gt;sz)) == 0){</span>
<span class='curline'><a href='../S/107.html#L199'>curproc</a>           199 proc.c           np-&gt;sz = curproc-&gt;sz;</span>
<span class='curline'><a href='../S/107.html#L200'>curproc</a>           200 proc.c           np-&gt;parent = curproc;</span>
<span class='curline'><a href='../S/107.html#L201'>curproc</a>           201 proc.c           *np-&gt;tf = *curproc-&gt;tf;</span>
<span class='curline'><a href='../S/107.html#L207'>curproc</a>           207 proc.c             if(curproc-&gt;ofile[i])</span>
<span class='curline'><a href='../S/107.html#L208'>curproc</a>           208 proc.c               np-&gt;ofile[i] = filedup(curproc-&gt;ofile[i]);</span>
<span class='curline'><a href='../S/107.html#L209'>curproc</a>           209 proc.c           np-&gt;cwd = idup(curproc-&gt;cwd);</span>
<span class='curline'><a href='../S/107.html#L211'>curproc</a>           211 proc.c           safestrcpy(np-&gt;name, curproc-&gt;name, sizeof(curproc-&gt;name));</span>
<span class='curline'><a href='../S/107.html#L230'>curproc</a>           230 proc.c           struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/107.html#L234'>curproc</a>           234 proc.c           if(curproc == initproc)</span>
<span class='curline'><a href='../S/107.html#L239'>curproc</a>           239 proc.c             if(curproc-&gt;ofile[fd]){</span>
<span class='curline'><a href='../S/107.html#L240'>curproc</a>           240 proc.c               fileclose(curproc-&gt;ofile[fd]);</span>
<span class='curline'><a href='../S/107.html#L241'>curproc</a>           241 proc.c               curproc-&gt;ofile[fd] = 0;</span>
<span class='curline'><a href='../S/107.html#L246'>curproc</a>           246 proc.c           iput(curproc-&gt;cwd);</span>
<span class='curline'><a href='../S/107.html#L248'>curproc</a>           248 proc.c           curproc-&gt;cwd = 0;</span>
<span class='curline'><a href='../S/107.html#L253'>curproc</a>           253 proc.c           wakeup1(curproc-&gt;parent);</span>
<span class='curline'><a href='../S/107.html#L257'>curproc</a>           257 proc.c             if(p-&gt;parent == curproc){</span>
<span class='curline'><a href='../S/107.html#L265'>curproc</a>           265 proc.c           curproc-&gt;state = ZOMBIE;</span>
<span class='curline'><a href='../S/107.html#L277'>curproc</a>           277 proc.c           struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/107.html#L284'>curproc</a>           284 proc.c               if(p-&gt;parent != curproc)</span>
<span class='curline'><a href='../S/107.html#L304'>curproc</a>           304 proc.c             if(!havekids || curproc-&gt;killed){</span>
<span class='curline'><a href='../S/107.html#L310'>curproc</a>           310 proc.c             sleep(curproc, &amp;ptable.lock);  //DOC: wait-sleep</span>
<span class='curline'><a href='../S/142.html#L20'>curproc</a>            20 syscall.c        struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/142.html#L22'>curproc</a>            22 syscall.c        if(addr &gt;= curproc-&gt;sz || addr+4 &gt; curproc-&gt;sz)</span>
<span class='curline'><a href='../S/142.html#L35'>curproc</a>            35 syscall.c        struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/142.html#L37'>curproc</a>            37 syscall.c        if(addr &gt;= curproc-&gt;sz)</span>
<span class='curline'><a href='../S/142.html#L40'>curproc</a>            40 syscall.c        ep = (char*)curproc-&gt;sz;</span>
<span class='curline'><a href='../S/142.html#L62'>curproc</a>            62 syscall.c        struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/142.html#L66'>curproc</a>            66 syscall.c        if(size &lt; 0 || (uint)i &gt;= curproc-&gt;sz || (uint)i+size &gt; curproc-&gt;sz)</span>
<span class='curline'><a href='../S/142.html#L135'>curproc</a>           135 syscall.c        struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/142.html#L137'>curproc</a>           137 syscall.c        num = curproc-&gt;tf-&gt;eax;</span>
<span class='curline'><a href='../S/142.html#L139'>curproc</a>           139 syscall.c          curproc-&gt;tf-&gt;eax = syscalls[num]();</span>
<span class='curline'><a href='../S/142.html#L142'>curproc</a>           142 syscall.c                  curproc-&gt;pid, curproc-&gt;name, num);</span>
<span class='curline'><a href='../S/142.html#L143'>curproc</a>           143 syscall.c          curproc-&gt;tf-&gt;eax = -1;</span>
<span class='curline'><a href='../S/145.html#L44'>curproc</a>            44 sysfile.c        struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/145.html#L47'>curproc</a>            47 sysfile.c          if(curproc-&gt;ofile[fd] == 0){</span>
<span class='curline'><a href='../S/145.html#L48'>curproc</a>            48 sysfile.c            curproc-&gt;ofile[fd] = f;</span>
<span class='curline'><a href='../S/145.html#L377'>curproc</a>           377 sysfile.c        struct proc *curproc = myproc();</span>
<span class='curline'><a href='../S/145.html#L391'>curproc</a>           391 sysfile.c        iput(curproc-&gt;cwd);</span>
<span class='curline'><a href='../S/145.html#L393'>curproc</a>           393 sysfile.c        curproc-&gt;cwd = ip;</span>
</pre>
</body>
</html>
